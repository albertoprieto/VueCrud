import{g as L,u as S,a as B,d as E}from"./articulosService-CVdaICS3.js";import{_ as M,r as u,k as O,l as h,c as f,a as l,b as a,d as s,w as b,o as V,i as c,g as p,s as n,e as D,t as I,m as g,n as A,j as F}from"./index-BB9LpqwG.js";const K={class:"articulos"},P={class:"actions"},j={class:"modal-content"},z={class:"form-grid"},G={class:"form-col"},T={class:"form-group"},X={class:"form-group"},q={key:0,class:"error-text"},H={class:"form-group"},J={key:0,class:"error-text"},Q={class:"form-group"},R={class:"form-col"},W={class:"form-group"},Y={class:"form-group"},Z={class:"form-group"},ee={class:"modal-actions"},oe={__name:"Articulos",setup(le){const m=u([]),r=u(!1),o=u({id:null,codigo:"",nombre:"",pagina:""}),d=u(""),k=u("nombre"),C=u(1),v=async()=>{m.value=await L()};O(v);const w=()=>{o.value={id:null,codigo:"",nombre:"",pagina:""},r.value=!0},_=()=>{r.value=!1},U=async()=>{o.value.id?await S({...o.value}):await B({...o.value}),r.value=!1,await v()},x=i=>{o.value={...i},r.value=!0},y=async i=>{confirm("¿Eliminar este artículo?")&&(await E(i),await v())},N=h(()=>d.value?m.value.filter(i=>i.nombre.toLowerCase().includes(d.value.toLowerCase())||i.codigo.toLowerCase().includes(d.value.toLowerCase())||i.pagina.toLowerCase().includes(d.value.toLowerCase())):m.value);return(i,e)=>(V(),f("div",K,[e[16]||(e[16]=l("h2",null,"Artículos",-1)),l("div",P,[a(s(c),{label:"Agregar Artículo",icon:"pi pi-plus",onClick:w}),a(s(p),{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),placeholder:"Buscar...",class:"ml-2"},null,8,["modelValue"])]),a(s(D),{value:N.value,sortField:k.value,sortOrder:C.value,responsiveLayout:"scroll"},{default:b(()=>[a(s(n),{field:"sku",header:"sku",sortable:""}),a(s(n),{field:"nombre",header:"Nombre",sortable:""}),a(s(n),{field:"descripcion",header:"Descripción",sortable:""}),a(s(n),{field:"tipo",header:"tipo",sortable:""}),a(s(n),{field:"precioVenta",header:"Precio de venta",sortable:""}),a(s(n),{header:"Acciones"},{body:b(t=>[a(s(c),{icon:"pi pi-pencil",class:"p-button-text",onClick:$=>x(t.data)},null,8,["onClick"]),a(s(c),{icon:"pi pi-trash",class:"p-button-text p-button-danger",onClick:$=>y(t.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value","sortField","sortOrder"]),a(s(F),{visible:r.value,"onUpdate:visible":e[8]||(e[8]=t=>r.value=t),header:"Agregar/Editar Artículo",modal:!0,closable:!0},{default:b(()=>[l("div",j,[l("h3",null,I(o.value.id?"Editar Artículo":"Nuevo Artículo"),1),l("div",z,[l("div",G,[l("div",T,[e[9]||(e[9]=l("label",{for:"tipo"},"Tipo:",-1)),a(s(g),{id:"tipo",modelValue:o.value.tipo,"onUpdate:modelValue":e[1]||(e[1]=t=>o.value.tipo=t),options:["Bienes","Servicio"],placeholder:"Selecciona tipo"},null,8,["modelValue"])]),l("div",X,[e[10]||(e[10]=l("label",{for:"nombre"},"Nombre:",-1)),a(s(p),{id:"nombre",modelValue:o.value.nombre,"onUpdate:modelValue":e[2]||(e[2]=t=>o.value.nombre=t),placeholder:"Nombre del artículo"},null,8,["modelValue"]),o.value.nombre?A("",!0):(V(),f("small",q,"Obligatorio."))]),l("div",H,[e[11]||(e[11]=l("label",{for:"sku"},"SKU:",-1)),a(s(p),{id:"sku",modelValue:o.value.sku,"onUpdate:modelValue":e[3]||(e[3]=t=>o.value.sku=t),placeholder:"SKU o código interno"},null,8,["modelValue"]),o.value.sku?A("",!0):(V(),f("small",J,"Obligatorio."))]),l("div",Q,[e[12]||(e[12]=l("label",{for:"unidad"},"Unidad:",-1)),a(s(g),{id:"unidad",modelValue:o.value.unidad,"onUpdate:modelValue":e[4]||(e[4]=t=>o.value.unidad=t),options:["pieza","servicio","kg","litro"],placeholder:"Selecciona unidad"},null,8,["modelValue"])])]),l("div",R,[l("div",W,[e[13]||(e[13]=l("label",{for:"precioVenta"},"Precio de venta (MXN):",-1)),a(s(p),{id:"precioVenta",modelValue:o.value.precioVenta,"onUpdate:modelValue":e[5]||(e[5]=t=>o.value.precioVenta=t),placeholder:"Precio de venta"},null,8,["modelValue"])]),l("div",Y,[e[14]||(e[14]=l("label",{for:"impuesto"},"Impuesto:",-1)),a(s(g),{id:"impuesto",modelValue:o.value.impuesto,"onUpdate:modelValue":e[6]||(e[6]=t=>o.value.impuesto=t),options:["IVA 16%","IVA 0%","Exento"],placeholder:"Selecciona impuesto"},null,8,["modelValue"])]),l("div",Z,[e[15]||(e[15]=l("label",{for:"descripcion"},"Descripción:",-1)),a(s(p),{id:"descripcion",modelValue:o.value.descripcion,"onUpdate:modelValue":e[7]||(e[7]=t=>o.value.descripcion=t),placeholder:"Descripción (opcional)"},null,8,["modelValue"])])])]),l("div",ee,[a(s(c),{label:"Guardar",icon:"pi pi-save",onClick:U}),a(s(c),{label:"Cancelar",icon:"pi pi-times",class:"p-button-secondary",onClick:_})])])]),_:1},8,["visible"])]))}},te=M(oe,[["__scopeId","data-v-af048752"]]);export{te as default};
