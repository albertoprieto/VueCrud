import{_ as E,r as k,k as j,c as d,a as u,b as t,d as l,w as f,o as r,i as c,s as p,J as v,K as b,t as y,e as F,g as C,D as V,v as w,j as G}from"./index-BZtuHe24.js";import{g as I,u as J,a as K,d as L}from"./clientesService-DRt112T4.js";const S={class:"clientes-container"},q={class:"clientes-card"},z={class:"form-group"},H={class:"form-group"},O={class:"form-group"},Q={class:"form-group"},R={class:"form-group"},W={class:"form-group"},X={class:"modal-actions"},Y={__name:"Clientes",setup(Z){const _=k([]),m=k(!1),e=k({id:null,nombre:"",telefonos:[""],correo:"",direccion:"",usuarios:[""],plataformas:[""]}),g=async()=>{_.value=await I()};j(g);const U=()=>{e.value={id:null,nombre:"",telefonos:[""],correo:"",direccion:"",usuarios:[""],plataformas:[""]},m.value=!0},h=()=>{m.value=!1},$=async()=>{e.value.nombre&&(e.value.telefonos=e.value.telefonos.filter(a=>a),e.value.usuarios=e.value.usuarios.filter(a=>a),e.value.plataformas=e.value.plataformas.filter(a=>a),e.value.id?await J(e.value.id,e.value):await K(e.value),m.value=!1,await g())},x=a=>{var o,n,s;e.value={id:a.id,nombre:a.nombre,telefonos:(o=a.telefonos)!=null&&o.length?[...a.telefonos]:[""],correo:a.correo,direccion:a.direccion,usuarios:(n=a.usuarios)!=null&&n.length?[...a.usuarios]:[""],plataformas:(s=a.plataformas)!=null&&s.length?[...a.plataformas]:[""]},m.value=!0},N=async a=>{await L(a),await g()},D=()=>e.value.telefonos.push(""),B=a=>e.value.telefonos.splice(a,1),M=()=>e.value.usuarios.push(""),T=a=>e.value.usuarios.splice(a,1),P=()=>e.value.plataformas.push(""),A=a=>e.value.plataformas.splice(a,1);return(a,o)=>(r(),d("div",S,[o[10]||(o[10]=u("h2",{class:"clientes-title"},"Clientes",-1)),u("div",q,[t(l(c),{label:"Agregar Cliente",icon:"pi pi-plus",onClick:U,class:"mb-2"}),t(l(F),{value:_.value},{default:f(()=>[t(l(p),{field:"nombre",header:"Nombre"}),t(l(p),{field:"telefono",header:"Teléfonos"},{body:f(n=>[u("ul",null,[(r(!0),d(v,null,b(n.data.telefonos,(s,i)=>(r(),d("li",{key:i},y(s),1))),128))])]),_:1}),t(l(p),{field:"correo",header:"Correo"}),t(l(p),{field:"direccion",header:"Dirección"}),t(l(p),{header:"Usuarios"},{body:f(n=>[u("ul",null,[(r(!0),d(v,null,b(n.data.usuarios,(s,i)=>(r(),d("li",{key:i},y(s),1))),128))])]),_:1}),t(l(p),{header:"Plataformas"},{body:f(n=>[u("ul",null,[(r(!0),d(v,null,b(n.data.plataformas,(s,i)=>(r(),d("li",{key:i},y(s),1))),128))])]),_:1}),t(l(p),{header:"Acciones"},{body:f(n=>[t(l(c),{icon:"pi pi-pencil",class:"p-button-text",onClick:s=>x(n.data)},null,8,["onClick"]),t(l(c),{icon:"pi pi-trash",class:"p-button-text p-button-danger",onClick:s=>N(n.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value"])]),t(l(G),{visible:m.value,"onUpdate:visible":o[3]||(o[3]=n=>m.value=n),header:e.value.id?"Editar Cliente":"Nuevo Cliente",modal:!0,closable:!0,class:"clientes-dialog"},{default:f(()=>[u("div",z,[o[4]||(o[4]=u("label",{for:"nombre"},"Nombre:",-1)),t(l(C),{id:"nombre",modelValue:e.value.nombre,"onUpdate:modelValue":o[0]||(o[0]=n=>e.value.nombre=n),class:"w-full"},null,8,["modelValue"])]),u("div",H,[o[5]||(o[5]=u("label",null,"Teléfonos:",-1)),(r(!0),d(v,null,b(e.value.telefonos,(n,s)=>(r(),d("div",{key:s,style:{display:"flex",gap:"0.5rem","align-items":"center"}},[t(l(C),{modelValue:e.value.telefonos[s],"onUpdate:modelValue":i=>e.value.telefonos[s]=i,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),e.value.telefonos.length>1?(r(),V(l(c),{key:0,icon:"pi pi-minus",class:"p-button-text p-button-danger",onClick:i=>B(s)},null,8,["onClick"])):w("",!0)]))),128)),t(l(c),{icon:"pi pi-plus",class:"p-button-text",onClick:D})]),u("div",O,[o[6]||(o[6]=u("label",{for:"correo"},"Correo:",-1)),t(l(C),{id:"correo",modelValue:e.value.correo,"onUpdate:modelValue":o[1]||(o[1]=n=>e.value.correo=n),class:"w-full"},null,8,["modelValue"])]),u("div",Q,[o[7]||(o[7]=u("label",{for:"direccion"},"Dirección:",-1)),t(l(C),{id:"direccion",modelValue:e.value.direccion,"onUpdate:modelValue":o[2]||(o[2]=n=>e.value.direccion=n),class:"w-full"},null,8,["modelValue"])]),u("div",R,[o[8]||(o[8]=u("label",null,"Usuarios:",-1)),(r(!0),d(v,null,b(e.value.usuarios,(n,s)=>(r(),d("div",{key:s,style:{display:"flex",gap:"0.5rem","align-items":"center"}},[t(l(C),{modelValue:e.value.usuarios[s],"onUpdate:modelValue":i=>e.value.usuarios[s]=i,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),e.value.usuarios.length>1?(r(),V(l(c),{key:0,icon:"pi pi-minus",class:"p-button-text p-button-danger",onClick:i=>T(s)},null,8,["onClick"])):w("",!0)]))),128)),t(l(c),{icon:"pi pi-plus",class:"p-button-text",onClick:M})]),u("div",W,[o[9]||(o[9]=u("label",null,"Plataformas:",-1)),(r(!0),d(v,null,b(e.value.plataformas,(n,s)=>(r(),d("div",{key:s,style:{display:"flex",gap:"0.5rem","align-items":"center"}},[t(l(C),{modelValue:e.value.plataformas[s],"onUpdate:modelValue":i=>e.value.plataformas[s]=i,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"]),e.value.plataformas.length>1?(r(),V(l(c),{key:0,icon:"pi pi-minus",class:"p-button-text p-button-danger",onClick:i=>A(s)},null,8,["onClick"])):w("",!0)]))),128)),t(l(c),{icon:"pi pi-plus",class:"p-button-text",onClick:P})]),u("div",X,[t(l(c),{label:"Guardar",icon:"pi pi-save",onClick:$}),t(l(c),{label:"Cancelar",icon:"pi pi-times",class:"p-button-secondary",onClick:h})])]),_:1},8,["visible","header"])]))}},ae=E(Y,[["__scopeId","data-v-5edfa120"]]);export{ae as default};
