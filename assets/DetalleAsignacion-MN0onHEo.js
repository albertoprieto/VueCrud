import{_ as f,r as v,k as m,c as i,a,t as s,v as c,J as k,K as y,b as D,d as N,ao as V,o,i as F}from"./index-CMb3Emy9.js";import{g as w}from"./asignacionesService-QHBQUJy4.js";import{a as x,g as A}from"./ventasService-p0YGWOuK.js";import{g as C}from"./clientesService-CrkLqMwo.js";const $={class:"detalle-asignacion"},T={key:0},B={class:"asignacion-info"},I={class:"asignacion-value"},S={class:"asignacion-value"},E={class:"asignacion-value"},M={class:"asignacion-value"},R={key:0,class:"venta-detalle-card"},h={class:"venta-detalle-info"},J={class:"venta-value"},K={class:"venta-value"},L={class:"venta-value"},O={class:"detalle-table"},P={key:0},U={key:0},j={__name:"DetalleAsignacion",setup(q){const _=V(),l=v(null),d=v(null),r=v([]),g=v("");return m(async()=>{var e,u;const p=await w();if(l.value=p.find(t=>t.id==_.params.id),(e=l.value)!=null&&e.venta_id){const t=await x();d.value=t.find(n=>n.id==l.value.venta_id)||{},r.value=await A(l.value.venta_id)}if((u=l.value)!=null&&u.cliente_id){const n=(await C()).find(b=>b.id==l.value.cliente_id);g.value=n?n.nombre:""}}),(p,e)=>{var u,t;return o(),i("div",$,[e[13]||(e[13]=a("h2",null,"Detalle de Asignación",-1)),l.value?(o(),i("div",T,[a("div",B,[a("div",null,[e[1]||(e[1]=a("span",{class:"asignacion-label"},"Técnico:",-1)),a("span",I,s(l.value.tecnico),1)]),a("div",null,[e[2]||(e[2]=a("span",{class:"asignacion-label"},"Fecha de servicio:",-1)),a("span",S,s(l.value.fecha_servicio),1)]),a("div",null,[e[3]||(e[3]=a("span",{class:"asignacion-label"},"Nota de venta:",-1)),a("span",E,s(l.value.venta_id),1)]),a("div",null,[e[4]||(e[4]=a("span",{class:"asignacion-label"},"Cliente:",-1)),a("span",M,s(g.value||l.value.cliente_id),1)])]),d.value?(o(),i("div",R,[e[12]||(e[12]=a("h3",null,"Detalle de la Nota de Venta",-1)),a("div",h,[a("div",null,[e[5]||(e[5]=a("span",{class:"venta-label"},"Fecha:",-1)),a("span",J,s(((u=d.value.fecha)==null?void 0:u.split("T")[0])||d.value.fecha),1)]),a("div",null,[e[6]||(e[6]=a("span",{class:"venta-label"},"Observaciones:",-1)),a("span",K,s(d.value.observaciones||"Sin observaciones"),1)]),a("div",null,[e[7]||(e[7]=a("span",{class:"venta-label"},"Total:",-1)),a("span",L,"$"+s((t=d.value.total)==null?void 0:t.toFixed(2)),1)])]),a("table",O,[a("thead",null,[a("tr",null,[e[8]||(e[8]=a("th",null,"Artículo",-1)),e[9]||(e[9]=a("th",null,"Cantidad",-1)),e[10]||(e[10]=a("th",null,"Precio Unitario",-1)),e[11]||(e[11]=a("th",null,"Subtotal",-1)),r.value&&r.value.some(n=>n.imei)?(o(),i("th",P,"IMEI")):c("",!0)])]),a("tbody",null,[(o(!0),i(k,null,y(r.value,n=>(o(),i("tr",{key:n.id},[a("td",null,s(n.articulo_nombre),1),a("td",null,s(n.cantidad),1),a("td",null,"$"+s(Number(n.precio_unitario).toFixed(2)),1),a("td",null,"$"+s((n.cantidad*n.precio_unitario).toFixed(2)),1),n.imei?(o(),i("td",U,s(n.imei),1)):c("",!0)]))),128))])])])):c("",!0)])):c("",!0),D(N(F),{label:"Regresar",icon:"pi pi-arrow-left",onClick:e[0]||(e[0]=n=>p.$router.back()),class:"btn-regresar"})])}}},W=f(j,[["__scopeId","data-v-c59aaa02"]]);export{W as default};
