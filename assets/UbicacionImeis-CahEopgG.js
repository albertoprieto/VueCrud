import{r as n,k,c as A,a as c,t as E,b as e,d as a,w as m,m as D,o as C,i as g,s,A as S,e as I,p as $,K as B}from"./index-X8QJi6UH.js";import{g as K,b as N,c as U}from"./ubicacionesService-Cun70x0L.js";const z={__name:"UbicacionImeis",setup(T){const b=B(),M=n(null),v=n([]),w=n([]),d=n([]),u=n([]),r=n(null),y=n([]),p=n(!0),f=async()=>{p.value=!0;const t=await K();M.value=t.find(o=>o.id==b.params.id),v.value=await N(b.params.id);const i=await D();w.value=i.filter(o=>o.ubicacion_id===null),y.value=t.filter(o=>o.id!=b.params.id),p.value=!1},V=async()=>{await U(b.params.id,d.value.map(t=>t.imei)),d.value=[],await f()},h=async()=>{await U(r.value.id,u.value.map(t=>t.imei)),u.value=[],r.value=null,await f()};return k(f),(t,i)=>{var o;return C(),A("div",null,[c("h2",null,"IMEIs en la bodega: "+E((o=M.value)==null?void 0:o.nombre),1),e(a(g),{label:"Volver",icon:"pi pi-arrow-left",onClick:i[0]||(i[0]=l=>t.$router.back()),class:"mb-3"}),e(a(I),{value:v.value,loading:p.value},{default:m(()=>[e(a(s),{field:"imei",header:"IMEI"}),e(a(s),{field:"articulo_nombre",header:"Artículo"}),e(a(s),{field:"status",header:"Estado"},{body:m(l=>[c("span",{class:S({"status-disponible":l.data.status==="Disponible","status-vendido":l.data.status==="Vendido","status-otro":l.data.status!=="Disponible"&&l.data.status!=="Vendido"})},E(l.data.status),3)]),_:1}),e(a(s),{field:"date",header:"Fecha registro"}),e(a(s),{field:"registeredBy",header:"Registró"}),e(a(s),{field:"technician",header:"Técnico"})]),_:1},8,["value","loading"]),i[5]||(i[5]=c("h3",null,"Asignar IMEIs a esta bodega",-1)),e(a(I),{value:w.value,selectionMode:"multiple",selection:d.value,"onUpdate:selection":i[1]||(i[1]=l=>d.value=l),dataKey:"imei"},{empty:m(()=>i[4]||(i[4]=[c("span",null,"No hay IMEIs disponibles para asignar.",-1)])),default:m(()=>[e(a(s),{field:"imei",header:"IMEI"}),e(a(s),{field:"articulo_nombre",header:"Artículo"})]),_:1},8,["value","selection"]),e(a(g),{label:"Asignar seleccionados",onClick:V,disabled:d.value.length===0},null,8,["disabled"]),i[6]||(i[6]=c("h3",null,"Transferir IMEIs a otra bodega",-1)),e(a($),{modelValue:r.value,"onUpdate:modelValue":i[2]||(i[2]=l=>r.value=l),options:y.value,optionLabel:"nombre",placeholder:"Selecciona bodega destino",class:"mb-2"},null,8,["modelValue","options"]),e(a(I),{value:v.value,selectionMode:"multiple",selection:u.value,"onUpdate:selection":i[3]||(i[3]=l=>u.value=l),dataKey:"imei"},{default:m(()=>[e(a(s),{field:"imei",header:"IMEI"}),e(a(s),{field:"articulo_nombre",header:"Artículo"})]),_:1},8,["value","selection"]),e(a(g),{label:"Transferir seleccionados",onClick:h,disabled:!r.value||u.value.length===0},null,8,["disabled"])])}}};export{z as default};
