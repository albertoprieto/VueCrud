import{_ as z,r,o as L,c as R,a as e,b as i,w as d,u,d as k,e as $,s as f,f as F,t as U,n as O,g as v,h as W,i as Y,j as I,k as V,l as s,v as t,m as H,p as J}from"./index-D4-v7Pbq.js";import{_ as K}from"./NotaVentaPDF-CD0-1mlX.js";import{g as Q}from"./asignacionesService-B_j_1V0i.js";import"./_commonjsHelpers-Cpj98o6Y.js";const X={class:"consultar-reportes-container"},Z={key:0},_={class:"form-group"},h={class:"form-group"},ll={class:"form-group"},el={class:"form-group"},ol={class:"form-group"},al={class:"form-group"},sl={class:"form-group"},tl={class:"form-group"},il={class:"form-group"},ul={class:"form-group"},nl={class:"form-group"},rl={class:"form-group"},dl={class:"form-group"},pl={class:"form-group"},vl={class:"form-group"},ml={class:"form-group"},fl={class:"form-group"},bl={class:"form-group"},gl={class:"form-group"},wl={class:"form-group"},Ul={class:"form-group"},Vl={class:"form-group"},cl={class:"form-group"},Sl={class:"form-group"},Cl={class:"form-group"},yl={class:"form-group"},El={class:"form-group"},kl={class:"form-group"},$l={class:"form-group"},Ml={class:"form-group"},xl={class:"modal-actions"},Nl={class:"modal-actions"},Dl={style:{padding:"1.5rem","text-align":"center"}},Rl={__name:"ConsultarReportes",setup(Fl){const c=r([]),m=r(!1),S=r(!1),g=r(!1),a=r(null),w=r(!1),C=r(null),M=r(null),x=r(null),N=r([]),T={nombre:"GPSubicacion.com",direccion:"Guadalajara",rfc:"RFC123456"};let D=[];const p=r(!1),b=r("");async function y(){m.value=!0;try{const n=await k.get("https://api.gpsubicacionapi.com/reportes-servicio-todos");c.value=n.data,D=await Q()}catch{c.value=[],D=[],b.value="Error al cargar los reportes.",p.value=!0}m.value=!1}function A(n){a.value={...n},g.value=!0}async function B(){if(a.value){m.value=!0;try{await k.put(`https://api.gpsubicacionapi.com/reportes-servicio/${a.value.id}`,a.value),await y(),g.value=!1,b.value="Reporte actualizado correctamente.",p.value=!0}catch{b.value="Error al guardar los cambios.",p.value=!0}m.value=!1}}function q(n){C.value=n,w.value=!0}async function P(){if(C.value){m.value=!0;try{await k.delete(`https://api.gpsubicacionapi.com/reportes-servicio/${C.value.id}`),await y(),b.value="Reporte eliminado correctamente.",p.value=!0}catch{b.value="Error al eliminar el reporte.",p.value=!0}w.value=!1,m.value=!1}}function j(n){if(!n)return"";const l=new Date(n),o=String(l.getDate()).padStart(2,"0"),E=String(l.getMonth()+1).padStart(2,"0"),G=l.getFullYear();return`${o}/${E}/${G}`}return L(y),(n,l)=>($(),R("div",X,[l[70]||(l[70]=e("h2",{class:"consultar-reportes-title"},"Consultar Reportes de Servicio",-1)),i(u(W),{value:c.value,responsiveLayout:"scroll",loading:m.value},{default:d(()=>[i(u(f),{field:"tipo_servicio",header:"Tipo"}),i(u(f),{field:"nombre_cliente",header:"Cliente"}),i(u(f),{field:"fecha",header:"Fecha"},{body:d(o=>[F(U(j(o.data.fecha)),1)]),_:1}),i(u(f),{field:"subtotal",header:"Subtotal"},{body:d(o=>[F(U(o.data.subtotal?"$"+Number(o.data.subtotal).toFixed(2):"-"),1)]),_:1}),i(u(f),{field:"forma_pago",header:"Forma de pago"}),i(u(f),{field:"pagado",header:"¿Pagado?"},{body:d(o=>[e("span",{style:O({color:o.data.pagado?"#28a745":"#d32f2f",fontWeight:"bold"})},U(o.data.pagado?"Sí":"No"),5)]),_:1}),i(u(f),{header:"Acciones"},{body:d(o=>[i(u(v),{icon:"pi pi-pencil",class:"p-button-sm p-button-info",label:"Editar",onClick:E=>A(o.data)},null,8,["onClick"]),i(u(v),{icon:"pi pi-trash",class:"p-button-sm p-button-danger ml-2",label:"Eliminar",onClick:E=>q(o.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","loading"]),i(u(V),{visible:S.value,"onUpdate:visible":l[1]||(l[1]=o=>S.value=o),header:"Nota de Venta",modal:!0,class:"historico-dialog"},{default:d(()=>[M.value&&x.value&&N.value.length?($(),Y(K,{key:0,venta:M.value,cliente:x.value,articulos:N.value,empresa:T,"venta-registrada":!0},null,8,["venta","cliente","articulos"])):I("",!0),i(u(v),{label:"Cerrar",icon:"pi pi-times",onClick:l[0]||(l[0]=o=>S.value=!1),class:"mt-3"})]),_:1},8,["visible"]),i(u(V),{visible:g.value,"onUpdate:visible":l[33]||(l[33]=o=>g.value=o),header:"Editar Reporte de Servicio",modal:!0},{default:d(()=>[e("form",{onSubmit:J(B,["prevent"])},[a.value?($(),R("div",Z,[e("div",_,[l[38]||(l[38]=e("label",null,"Tipo de Servicio",-1)),s(e("input",{"onUpdate:modelValue":l[2]||(l[2]=o=>a.value.tipo_servicio=o),class:"w-full"},null,512),[[t,a.value.tipo_servicio]])]),e("div",h,[l[39]||(l[39]=e("label",null,"Lugar/Centro de instalación",-1)),s(e("input",{"onUpdate:modelValue":l[3]||(l[3]=o=>a.value.lugar_instalacion=o),class:"w-full"},null,512),[[t,a.value.lugar_instalacion]])]),e("div",ll,[l[40]||(l[40]=e("label",null,"Marca",-1)),s(e("input",{"onUpdate:modelValue":l[4]||(l[4]=o=>a.value.marca=o),class:"w-full"},null,512),[[t,a.value.marca]])]),e("div",el,[l[41]||(l[41]=e("label",null,"Submarca",-1)),s(e("input",{"onUpdate:modelValue":l[5]||(l[5]=o=>a.value.submarca=o),class:"w-full"},null,512),[[t,a.value.submarca]])]),e("div",ol,[l[42]||(l[42]=e("label",null,"Modelo",-1)),s(e("input",{"onUpdate:modelValue":l[6]||(l[6]=o=>a.value.modelo=o),class:"w-full"},null,512),[[t,a.value.modelo]])]),e("div",al,[l[43]||(l[43]=e("label",null,"Placas",-1)),s(e("input",{"onUpdate:modelValue":l[7]||(l[7]=o=>a.value.placas=o),class:"w-full"},null,512),[[t,a.value.placas]])]),e("div",sl,[l[44]||(l[44]=e("label",null,"Color",-1)),s(e("input",{"onUpdate:modelValue":l[8]||(l[8]=o=>a.value.color=o),class:"w-full"},null,512),[[t,a.value.color]])]),e("div",tl,[l[45]||(l[45]=e("label",null,"Número económico",-1)),s(e("input",{"onUpdate:modelValue":l[9]||(l[9]=o=>a.value.numero_economico=o),class:"w-full"},null,512),[[t,a.value.numero_economico]])]),e("div",il,[l[46]||(l[46]=e("label",null,"Equipo/Plan",-1)),s(e("input",{"onUpdate:modelValue":l[10]||(l[10]=o=>a.value.equipo_plan=o),class:"w-full"},null,512),[[t,a.value.equipo_plan]])]),e("div",ul,[l[47]||(l[47]=e("label",null,"IMEI",-1)),s(e("input",{"onUpdate:modelValue":l[11]||(l[11]=o=>a.value.imei=o),class:"w-full"},null,512),[[t,a.value.imei]])]),e("div",nl,[l[48]||(l[48]=e("label",null,"Serie",-1)),s(e("input",{"onUpdate:modelValue":l[12]||(l[12]=o=>a.value.serie=o),class:"w-full"},null,512),[[t,a.value.serie]])]),e("div",rl,[l[49]||(l[49]=e("label",null,"Accesorios",-1)),s(e("input",{"onUpdate:modelValue":l[13]||(l[13]=o=>a.value.accesorios=o),class:"w-full"},null,512),[[t,a.value.accesorios]])]),e("div",dl,[l[50]||(l[50]=e("label",null,"SIM Proveedor",-1)),s(e("input",{"onUpdate:modelValue":l[14]||(l[14]=o=>a.value.sim_proveedor=o),class:"w-full"},null,512),[[t,a.value.sim_proveedor]])]),e("div",pl,[l[51]||(l[51]=e("label",null,"SIM Serie",-1)),s(e("input",{"onUpdate:modelValue":l[15]||(l[15]=o=>a.value.sim_serie=o),class:"w-full"},null,512),[[t,a.value.sim_serie]])]),e("div",vl,[l[52]||(l[52]=e("label",null,"SIM Instalador",-1)),s(e("input",{"onUpdate:modelValue":l[16]||(l[16]=o=>a.value.sim_instalador=o),class:"w-full"},null,512),[[t,a.value.sim_instalador]])]),e("div",ml,[l[53]||(l[53]=e("label",null,"SIM Teléfono",-1)),s(e("input",{"onUpdate:modelValue":l[17]||(l[17]=o=>a.value.sim_telefono=o),class:"w-full"},null,512),[[t,a.value.sim_telefono]])]),e("div",fl,[l[54]||(l[54]=e("label",null,"Batería",-1)),s(e("input",{"onUpdate:modelValue":l[18]||(l[18]=o=>a.value.bateria=o),class:"w-full"},null,512),[[t,a.value.bateria]])]),e("div",bl,[l[55]||(l[55]=e("label",null,"Ignición",-1)),s(e("input",{"onUpdate:modelValue":l[19]||(l[19]=o=>a.value.ignicion=o),class:"w-full"},null,512),[[t,a.value.ignicion]])]),e("div",gl,[l[56]||(l[56]=e("label",null,"Corte bomba/switch",-1)),s(e("input",{"onUpdate:modelValue":l[20]||(l[20]=o=>a.value.corte=o),class:"w-full"},null,512),[[t,a.value.corte]])]),e("div",wl,[l[57]||(l[57]=e("label",null,"Ubicación corte",-1)),s(e("input",{"onUpdate:modelValue":l[21]||(l[21]=o=>a.value.ubicacion_corte=o),class:"w-full"},null,512),[[t,a.value.ubicacion_corte]])]),e("div",Ul,[l[58]||(l[58]=e("label",null,"Observaciones",-1)),s(e("textarea",{"onUpdate:modelValue":l[22]||(l[22]=o=>a.value.observaciones=o),class:"w-full"},null,512),[[t,a.value.observaciones]])]),e("div",Vl,[l[59]||(l[59]=e("label",null,"Plataforma",-1)),s(e("input",{"onUpdate:modelValue":l[23]||(l[23]=o=>a.value.plataforma=o),class:"w-full"},null,512),[[t,a.value.plataforma]])]),e("div",cl,[l[60]||(l[60]=e("label",null,"Usuario",-1)),s(e("input",{"onUpdate:modelValue":l[24]||(l[24]=o=>a.value.usuario=o),class:"w-full"},null,512),[[t,a.value.usuario]])]),e("div",Sl,[l[61]||(l[61]=e("label",null,"Subtotal",-1)),s(e("input",{"onUpdate:modelValue":l[25]||(l[25]=o=>a.value.subtotal=o),class:"w-full"},null,512),[[t,a.value.subtotal]])]),e("div",Cl,[l[62]||(l[62]=e("label",null,"Forma de pago",-1)),s(e("input",{"onUpdate:modelValue":l[26]||(l[26]=o=>a.value.forma_pago=o),class:"w-full"},null,512),[[t,a.value.forma_pago]])]),e("div",yl,[l[64]||(l[64]=e("label",null,"¿Pagado?",-1)),s(e("select",{"onUpdate:modelValue":l[27]||(l[27]=o=>a.value.pagado=o),class:"w-full"},l[63]||(l[63]=[e("option",{value:!0},"Sí",-1),e("option",{value:!1},"No",-1)]),512),[[H,a.value.pagado]])]),e("div",El,[l[65]||(l[65]=e("label",null,"Nombre del cliente",-1)),s(e("input",{"onUpdate:modelValue":l[28]||(l[28]=o=>a.value.nombre_cliente=o),class:"w-full"},null,512),[[t,a.value.nombre_cliente]])]),e("div",kl,[l[66]||(l[66]=e("label",null,"Firma del cliente",-1)),s(e("input",{"onUpdate:modelValue":l[29]||(l[29]=o=>a.value.firma_cliente=o),class:"w-full"},null,512),[[t,a.value.firma_cliente]])]),e("div",$l,[l[67]||(l[67]=e("label",null,"Nombre del instalador",-1)),s(e("input",{"onUpdate:modelValue":l[30]||(l[30]=o=>a.value.nombre_instalador=o),class:"w-full"},null,512),[[t,a.value.nombre_instalador]])]),e("div",Ml,[l[68]||(l[68]=e("label",null,"Firma del instalador",-1)),s(e("input",{"onUpdate:modelValue":l[31]||(l[31]=o=>a.value.firma_instalador=o),class:"w-full"},null,512),[[t,a.value.firma_instalador]])])])):I("",!0),e("div",xl,[i(u(v),{label:"Guardar",icon:"pi pi-save",type:"submit"}),i(u(v),{label:"Cancelar",icon:"pi pi-times",class:"p-button-secondary ml-2",onClick:l[32]||(l[32]=o=>g.value=!1),type:"button"})])],32)]),_:1},8,["visible"]),i(u(V),{visible:w.value,"onUpdate:visible":l[35]||(l[35]=o=>w.value=o),header:"Confirmar Eliminación",modal:!0,closable:!1},{default:d(()=>[l[69]||(l[69]=e("div",{style:{padding:"1.5rem","text-align":"center"}},[e("span",null,"¿Seguro que deseas eliminar este reporte?")],-1)),e("div",Nl,[i(u(v),{label:"Eliminar",icon:"pi pi-trash",class:"p-button-danger",onClick:P}),i(u(v),{label:"Cancelar",icon:"pi pi-times",class:"p-button-secondary ml-2",onClick:l[34]||(l[34]=o=>w.value=!1)})])]),_:1},8,["visible"]),i(u(V),{visible:p.value,"onUpdate:visible":l[37]||(l[37]=o=>p.value=o),header:"Mensaje",modal:!0,closable:!1},{default:d(()=>[e("div",Dl,[e("span",null,U(b.value),1)]),i(u(v),{label:"Aceptar",icon:"pi pi-check",onClick:l[36]||(l[36]=o=>p.value=!1),class:"mt-3"})]),_:1},8,["visible"])]))}},ql=z(Rl,[["__scopeId","data-v-7377fc4e"]]);export{ql as default};
