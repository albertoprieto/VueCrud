import{g as O,u as I,a as F,d as K}from"./articulosService-C5c6lFXT.js";import{_ as P,r,k as T,l as j,c as w,a as o,b as a,d as s,w as m,o as A,i as u,g as f,s as p,e as z,t as y,m as C,n as E,j as _}from"./index-BinYHTfi.js";const G={class:"articulos"},X={class:"actions"},q={class:"articulos-card"},H={class:"modal-content"},J={class:"modal-title"},Q={class:"form-grid"},R={class:"form-col"},W={class:"form-group"},Y={class:"form-group"},Z={key:0,class:"error-text"},ee={class:"form-group"},le={key:0,class:"error-text"},oe={class:"form-group"},ae={class:"form-col"},se={class:"form-group"},te={class:"form-group"},ie={class:"form-group"},re={class:"modal-actions"},ue={class:"dialog-content"},de={class:"modal-actions"},ne={class:"dialog-content"},ce={class:"modal-actions"},pe={__name:"Articulos",setup(ve){const k=r([]),d=r(!1),t=r({id:null,sku:"",nombre:"",descripcion:"",tipo:"",precioVenta:"",unidad:"",impuesto:""}),n=r(""),$=r("nombre"),x=r(1),c=r(!1),b=r(""),v=r(!1),U=r(null),g=async()=>{k.value=await O()};T(g);const N=()=>{t.value={id:null,sku:"",nombre:"",descripcion:"",tipo:"",precioVenta:"",unidad:"",impuesto:""},d.value=!0},D=()=>{d.value=!1},S=async()=>{if(!t.value.nombre||!t.value.sku){b.value="Por favor, complete los campos obligatorios.",c.value=!0;return}try{t.value.id?await I({...t.value}):await F({...t.value}),d.value=!1,await g()}catch{b.value="Error al guardar el artículo.",c.value=!0}},h=i=>{t.value={...i},d.value=!0},L=i=>{U.value=i,v.value=!0},M=async i=>{try{await K(i),await g(),v.value=!1}catch{b.value="Error al eliminar el artículo.",c.value=!0}},B=j(()=>n.value?k.value.filter(i=>{var e,l,V;return((e=i.nombre)==null?void 0:e.toLowerCase().includes(n.value.toLowerCase()))||((l=i.sku)==null?void 0:l.toLowerCase().includes(n.value.toLowerCase()))||((V=i.descripcion)==null?void 0:V.toLowerCase().includes(n.value.toLowerCase()))}):k.value);return(i,e)=>(A(),w("div",G,[e[22]||(e[22]=o("h2",null,"Artículos",-1)),o("div",X,[a(s(u),{label:"Agregar Artículo",icon:"pi pi-plus",onClick:N}),a(s(f),{modelValue:n.value,"onUpdate:modelValue":e[0]||(e[0]=l=>n.value=l),placeholder:"Buscar...",class:"ml-2"},null,8,["modelValue"])]),o("div",q,[a(s(z),{value:B.value,sortField:$.value,sortOrder:x.value,responsiveLayout:"scroll"},{default:m(()=>[a(s(p),{field:"sku",header:"SKU",sortable:""}),a(s(p),{field:"nombre",header:"Nombre",sortable:""}),a(s(p),{field:"descripcion",header:"Descripción",sortable:""}),a(s(p),{field:"tipo",header:"Tipo",sortable:""}),a(s(p),{field:"precioVenta",header:"Precio de venta",sortable:""}),a(s(p),{header:"Acciones"},{body:m(l=>[a(s(u),{icon:"pi pi-pencil",class:"p-button-text",onClick:V=>h(l.data)},null,8,["onClick"]),a(s(u),{icon:"pi pi-trash",class:"p-button-text p-button-danger",onClick:V=>L(l.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value","sortField","sortOrder"])]),a(s(_),{visible:d.value,"onUpdate:visible":e[8]||(e[8]=l=>d.value=l),header:t.value.id?"Editar Artículo":"Nuevo Artículo",modal:!0,closable:!0,class:"custom-modal"},{default:m(()=>[o("div",H,[o("h3",J,y(t.value.id?"Editar Artículo":"Nuevo Artículo"),1),o("div",Q,[o("div",R,[o("div",W,[e[14]||(e[14]=o("label",{for:"tipo"},"Tipo:",-1)),a(s(C),{id:"tipo",modelValue:t.value.tipo,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.tipo=l),options:["Bienes","Servicio"],placeholder:"Selecciona tipo",class:"w-full"},null,8,["modelValue"])]),o("div",Y,[e[15]||(e[15]=o("label",{for:"nombre"},"Nombre:",-1)),a(s(f),{id:"nombre",modelValue:t.value.nombre,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.nombre=l),placeholder:"Nombre del artículo",class:"w-full"},null,8,["modelValue"]),t.value.nombre?E("",!0):(A(),w("small",Z,"Obligatorio."))]),o("div",ee,[e[16]||(e[16]=o("label",{for:"sku"},"SKU:",-1)),a(s(f),{id:"sku",modelValue:t.value.sku,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.sku=l),placeholder:"SKU o código interno",class:"w-full"},null,8,["modelValue"]),t.value.sku?E("",!0):(A(),w("small",le,"Obligatorio."))]),o("div",oe,[e[17]||(e[17]=o("label",{for:"unidad"},"Unidad:",-1)),a(s(C),{id:"unidad",modelValue:t.value.unidad,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.unidad=l),options:["pieza","servicio","kg","litro"],placeholder:"Selecciona unidad",class:"w-full"},null,8,["modelValue"])])]),o("div",ae,[o("div",se,[e[18]||(e[18]=o("label",{for:"precioVenta"},"Precio de venta (MXN):",-1)),a(s(f),{id:"precioVenta",modelValue:t.value.precioVenta,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.precioVenta=l),placeholder:"Precio de venta",class:"w-full"},null,8,["modelValue"])]),o("div",te,[e[19]||(e[19]=o("label",{for:"impuesto"},"Impuesto:",-1)),a(s(C),{id:"impuesto",modelValue:t.value.impuesto,"onUpdate:modelValue":e[6]||(e[6]=l=>t.value.impuesto=l),options:["IVA 16%","IVA 0%","Exento"],placeholder:"Selecciona impuesto",class:"w-full"},null,8,["modelValue"])]),o("div",ie,[e[20]||(e[20]=o("label",{for:"descripcion"},"Descripción:",-1)),a(s(f),{id:"descripcion",modelValue:t.value.descripcion,"onUpdate:modelValue":e[7]||(e[7]=l=>t.value.descripcion=l),placeholder:"Descripción (opcional)",class:"w-full"},null,8,["modelValue"])])])]),o("div",re,[a(s(u),{label:"Guardar",icon:"pi pi-save",onClick:S}),a(s(u),{label:"Cancelar",icon:"pi pi-times",class:"p-button-secondary",onClick:D})])])]),_:1},8,["visible","header"]),a(s(_),{visible:c.value,"onUpdate:visible":e[10]||(e[10]=l=>c.value=l),header:"Error",modal:!0,closable:!1},{default:m(()=>[o("div",ue,[o("p",null,y(b.value),1),o("div",de,[a(s(u),{label:"Aceptar",icon:"pi pi-check",onClick:e[9]||(e[9]=l=>c.value=!1)})])])]),_:1},8,["visible"]),a(s(_),{visible:v.value,"onUpdate:visible":e[13]||(e[13]=l=>v.value=l),header:"Confirmar Eliminación",modal:!0,closable:!1},{default:m(()=>[o("div",ne,[e[21]||(e[21]=o("p",null,"¿Eliminar este artículo?",-1)),o("div",ce,[a(s(u),{label:"Eliminar",icon:"pi pi-trash",class:"p-button-danger",onClick:e[11]||(e[11]=l=>M(U.value))}),a(s(u),{label:"Cancelar",icon:"pi pi-times",class:"p-button-secondary",onClick:e[12]||(e[12]=l=>v.value=!1)})])])]),_:1},8,["visible"])]))}},be=P(pe,[["__scopeId","data-v-b6e315e7"]]);export{be as default};
