import{_ as k,r as t,o as _,c as T,a as i,b as a,u as l,w as f,e as $,h as u,s as c,j as x,q as w,A as y,k as A}from"./index-XKA0IK-S.js";import{g as B,u as M,a as N,d as E}from"./usuariosService-Neegh-RW.js";const I={class:"tecnicos-container"},h={class:"tecnicos-actions"},j={class:"form-group"},q={class:"form-group"},D={class:"form-group"},G={class:"modal-actions"},P={__name:"Usuarios",setup(S){const m=t([]),p=t(!0),n=t(!1),r=t(!1),s=t({id:null,username:"",password:"",perfil:""}),v=async()=>{p.value=!0,m.value=await B(),p.value=!1};_(v);function b(){s.value={id:null,username:"",password:"",perfil:""},r.value=!1,n.value=!0}function U(d){s.value={...d,password:""},r.value=!0,n.value=!0}async function g(){!s.value.username||!s.value.perfil||(r.value?await M(s.value.id,s.value):await N(s.value),n.value=!1,await v())}async function C(d){await E(d),await v()}return(d,e)=>($(),T("div",I,[e[8]||(e[8]=i("h2",{class:"tecnicos-title"},"Usuarios",-1)),i("div",h,[a(l(u),{label:"Agregar Técnico",icon:"pi pi-plus",onClick:b})]),a(l(x),{value:m.value,class:"tecnicos-table",loading:p.value},{default:f(()=>[a(l(c),{field:"id",header:"ID"}),a(l(c),{field:"username",header:"Usuario"}),a(l(c),{field:"perfil",header:"Perfil"}),a(l(c),{header:"Acciones"},{body:f(o=>[a(l(u),{icon:"pi pi-pencil",class:"p-button-text",onClick:V=>U(o.data)},null,8,["onClick"]),a(l(u),{icon:"pi pi-trash",class:"p-button-text p-button-danger",onClick:V=>C(o.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value","loading"]),a(l(A),{visible:n.value,"onUpdate:visible":e[4]||(e[4]=o=>n.value=o),header:r.value?"Editar Técnico":"Nuevo Técnico",modal:!0},{default:f(()=>[i("div",j,[e[5]||(e[5]=i("label",null,"Usuario",-1)),a(l(w),{modelValue:s.value.username,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.username=o),class:"w-full"},null,8,["modelValue"])]),i("div",q,[e[6]||(e[6]=i("label",null,"Contraseña",-1)),a(l(w),{modelValue:s.value.password,"onUpdate:modelValue":e[1]||(e[1]=o=>s.value.password=o),type:"password",class:"w-full"},null,8,["modelValue"])]),i("div",D,[e[7]||(e[7]=i("label",null,"Perfil",-1)),a(l(y),{modelValue:s.value.perfil,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.perfil=o),options:["User","Admin","Tecnico","Cliente"],placeholder:"Selecciona perfil",class:"w-full"},null,8,["modelValue"])]),i("div",G,[a(l(u),{label:"Guardar",icon:"pi pi-save",onClick:g}),a(l(u),{label:"Cancelar",icon:"pi pi-times",class:"p-button-secondary",onClick:e[3]||(e[3]=o=>n.value=!1)})])]),_:1},8,["visible","header"])]))}},H=k(P,[["__scopeId","data-v-64527982"]]);export{H as default};
