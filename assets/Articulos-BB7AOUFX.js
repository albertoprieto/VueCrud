import{_ as h,r as c,k as E,l as L,c as V,a as l,b as t,d as a,w as A,o as k,i as m,g as v,s as p,e as M,t as B,m as w,n as y,j as D}from"./index-B-SsD_yE.js";const f="articulos",b=async()=>{const n=localStorage.getItem(f);return n?JSON.parse(n):[]},J=async n=>{const i=await b(),r=i.length?Math.max(...i.map(d=>d.id))+1:1,o={...n,id:r};return i.push(o),localStorage.setItem(f,JSON.stringify(i)),o},F=async n=>{const i=await b(),r=i.findIndex(o=>o.id===n.id);r!==-1&&(i[r]=n,localStorage.setItem(f,JSON.stringify(i)))},K=async n=>{let i=await b();i=i.filter(r=>r.id!==n),localStorage.setItem(f,JSON.stringify(i))},G={class:"articulos"},P={class:"actions"},T={class:"modal-content"},j={class:"form-grid"},z={class:"form-col"},R={class:"form-group"},X={class:"form-group"},Y={key:0,class:"error-text"},q={class:"form-group"},H={key:0,class:"error-text"},Q={class:"form-group"},W={class:"form-col"},Z={class:"form-group"},ee={class:"form-group"},oe={class:"form-group"},le={class:"modal-actions"},te={__name:"Articulos",setup(n){const i=c([]),r=c(!1),o=c({id:null,codigo:"",nombre:"",pagina:""}),d=c(""),C=c("nombre"),S=c(1),g=async()=>{i.value=await b()};E(g);const _=()=>{o.value={id:null,codigo:"",nombre:"",pagina:""},r.value=!0},x=()=>{r.value=!1},N=async()=>{o.value.id?await F({...o.value}):await J({...o.value}),r.value=!1,await g()},U=u=>{o.value={...u},r.value=!0},I=async u=>{confirm("¿Eliminar este artículo?")&&(await K(u),await g())},O=L(()=>d.value?i.value.filter(u=>u.nombre.toLowerCase().includes(d.value.toLowerCase())||u.codigo.toLowerCase().includes(d.value.toLowerCase())||u.pagina.toLowerCase().includes(d.value.toLowerCase())):i.value);return(u,e)=>(k(),V("div",G,[e[16]||(e[16]=l("h2",null,"Artículos",-1)),l("div",P,[t(a(m),{label:"Agregar Artículo",icon:"pi pi-plus",onClick:_}),t(a(v),{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),placeholder:"Buscar...",class:"ml-2"},null,8,["modelValue"])]),t(a(M),{value:O.value,sortField:C.value,sortOrder:S.value,responsiveLayout:"scroll"},{default:A(()=>[t(a(p),{field:"sku",header:"sku",sortable:""}),t(a(p),{field:"nombre",header:"Nombre",sortable:""}),t(a(p),{field:"descripcion",header:"Descripción",sortable:""}),t(a(p),{field:"tipo",header:"tipo",sortable:""}),t(a(p),{field:"precioVenta",header:"Precio de venta",sortable:""}),t(a(p),{header:"Acciones"},{body:A(s=>[t(a(m),{icon:"pi pi-pencil",class:"p-button-text",onClick:$=>U(s.data)},null,8,["onClick"]),t(a(m),{icon:"pi pi-trash",class:"p-button-text p-button-danger",onClick:$=>I(s.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value","sortField","sortOrder"]),t(a(D),{visible:r.value,"onUpdate:visible":e[8]||(e[8]=s=>r.value=s),header:"Agregar/Editar Artículo",modal:!0,closable:!0},{default:A(()=>[l("div",T,[l("h3",null,B(o.value.id?"Editar Artículo":"Nuevo Artículo"),1),l("div",j,[l("div",z,[l("div",R,[e[9]||(e[9]=l("label",{for:"tipo"},"Tipo:",-1)),t(a(w),{id:"tipo",modelValue:o.value.tipo,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value.tipo=s),options:["Bienes","Servicio"],placeholder:"Selecciona tipo"},null,8,["modelValue"])]),l("div",X,[e[10]||(e[10]=l("label",{for:"nombre"},"Nombre:",-1)),t(a(v),{id:"nombre",modelValue:o.value.nombre,"onUpdate:modelValue":e[2]||(e[2]=s=>o.value.nombre=s),placeholder:"Nombre del artículo"},null,8,["modelValue"]),o.value.nombre?y("",!0):(k(),V("small",Y,"Obligatorio."))]),l("div",q,[e[11]||(e[11]=l("label",{for:"sku"},"SKU:",-1)),t(a(v),{id:"sku",modelValue:o.value.sku,"onUpdate:modelValue":e[3]||(e[3]=s=>o.value.sku=s),placeholder:"SKU o código interno"},null,8,["modelValue"]),o.value.sku?y("",!0):(k(),V("small",H,"Obligatorio."))]),l("div",Q,[e[12]||(e[12]=l("label",{for:"unidad"},"Unidad:",-1)),t(a(w),{id:"unidad",modelValue:o.value.unidad,"onUpdate:modelValue":e[4]||(e[4]=s=>o.value.unidad=s),options:["pieza","servicio","kg","litro"],placeholder:"Selecciona unidad"},null,8,["modelValue"])])]),l("div",W,[l("div",Z,[e[13]||(e[13]=l("label",{for:"precioVenta"},"Precio de venta (MXN):",-1)),t(a(v),{id:"precioVenta",modelValue:o.value.precioVenta,"onUpdate:modelValue":e[5]||(e[5]=s=>o.value.precioVenta=s),placeholder:"Precio de venta"},null,8,["modelValue"])]),l("div",ee,[e[14]||(e[14]=l("label",{for:"impuesto"},"Impuesto:",-1)),t(a(w),{id:"impuesto",modelValue:o.value.impuesto,"onUpdate:modelValue":e[6]||(e[6]=s=>o.value.impuesto=s),options:["IVA 16%","IVA 0%","Exento"],placeholder:"Selecciona impuesto"},null,8,["modelValue"])]),l("div",oe,[e[15]||(e[15]=l("label",{for:"descripcion"},"Descripción:",-1)),t(a(v),{id:"descripcion",modelValue:o.value.descripcion,"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.descripcion=s),placeholder:"Descripción (opcional)"},null,8,["modelValue"])])])]),l("div",le,[t(a(m),{label:"Guardar",icon:"pi pi-save",onClick:N}),t(a(m),{label:"Cancelar",icon:"pi pi-times",class:"p-button-secondary",onClick:x})])])]),_:1},8,["visible"])]))}},se=h(te,[["__scopeId","data-v-5d9f8e92"]]);export{se as default};
