import{_ as $,r as c,k as L,l as M,c as V,a as l,b as t,d as s,w as A,o as w,i as p,g as m,s as v,e as h,t as B,m as k,n as C,j as J}from"./index-CSeXJLp8.js";const f="articulos",g=async()=>{const n=localStorage.getItem(f);return n?JSON.parse(n):[]},D=async n=>{const i=await g(),r=i.length?Math.max(...i.map(d=>d.id))+1:1,o={...n,id:r};return i.push(o),localStorage.setItem(f,JSON.stringify(i)),o},F=async n=>{const i=await g(),r=i.findIndex(o=>o.id===n.id);r!==-1&&(i[r]=n,localStorage.setItem(f,JSON.stringify(i)))},K=async n=>{let i=await g();i=i.filter(r=>r.id!==n),localStorage.setItem(f,JSON.stringify(i))},T={class:"articulos"},G={class:"actions"},P={class:"modal-content"},j={class:"form-grid"},z={class:"form-col"},R={class:"form-group"},X={class:"form-group"},Y={key:0,class:"error-text"},q={class:"form-group"},H={key:0,class:"error-text"},Q={class:"form-group"},W={class:"form-col"},Z={class:"form-group"},ee={class:"form-group"},oe={class:"form-group"},le={class:"modal-actions"},ae={__name:"Articulos",setup(n){const i=c([]),r=c(!1),o=c({id:null,codigo:"",nombre:"",pagina:""}),d=c(""),y=c("nombre"),S=c(1),b=async()=>{i.value=await g()};L(b);const _=()=>{o.value={id:null,codigo:"",nombre:"",pagina:""},r.value=!0},x=()=>{r.value=!1},N=async()=>{if(!o.value.codigo||!o.value.nombre||!o.value.pagina){alert("Todos los campos son obligatorios");return}o.value.id?await F({...o.value}):await D({...o.value}),r.value=!1,await b()},U=u=>{o.value={...u},r.value=!0},I=async u=>{confirm("¿Eliminar este artículo?")&&(await K(u),await b())},E=M(()=>d.value?i.value.filter(u=>u.nombre.toLowerCase().includes(d.value.toLowerCase())||u.codigo.toLowerCase().includes(d.value.toLowerCase())||u.pagina.toLowerCase().includes(d.value.toLowerCase())):i.value);return(u,e)=>(w(),V("div",T,[e[16]||(e[16]=l("h2",null,"Artículos",-1)),l("div",G,[t(s(p),{label:"Agregar Artículo",icon:"pi pi-plus",onClick:_}),t(s(m),{modelValue:d.value,"onUpdate:modelValue":e[0]||(e[0]=a=>d.value=a),placeholder:"Buscar...",class:"ml-2"},null,8,["modelValue"])]),t(s(h),{value:E.value,sortField:y.value,sortOrder:S.value,responsiveLayout:"scroll"},{default:A(()=>[t(s(v),{field:"codigo",header:"Código",sortable:""}),t(s(v),{field:"nombre",header:"Nombre",sortable:""}),t(s(v),{field:"pagina",header:"Página de Captura",sortable:""}),t(s(v),{header:"Acciones"},{body:A(a=>[t(s(p),{icon:"pi pi-pencil",class:"p-button-text",onClick:O=>U(a.data)},null,8,["onClick"]),t(s(p),{icon:"pi pi-trash",class:"p-button-text p-button-danger",onClick:O=>I(a.data.id)},null,8,["onClick"])]),_:1})]),_:1},8,["value","sortField","sortOrder"]),t(s(J),{visible:r.value,"onUpdate:visible":e[8]||(e[8]=a=>r.value=a),header:"Agregar/Editar Artículo",modal:!0,closable:!0},{default:A(()=>[l("div",P,[l("h3",null,B(o.value.id?"Editar Artículo":"Nuevo Artículo"),1),l("div",j,[l("div",z,[l("div",R,[e[9]||(e[9]=l("label",{for:"tipo"},"Tipo:",-1)),t(s(k),{id:"tipo",modelValue:o.value.tipo,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.tipo=a),options:["Bienes","Servicio"],placeholder:"Selecciona tipo"},null,8,["modelValue"])]),l("div",X,[e[10]||(e[10]=l("label",{for:"nombre"},"Nombre:",-1)),t(s(m),{id:"nombre",modelValue:o.value.nombre,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.nombre=a),placeholder:"Nombre del artículo"},null,8,["modelValue"]),o.value.nombre?C("",!0):(w(),V("small",Y,"Este campo es obligatorio."))]),l("div",q,[e[11]||(e[11]=l("label",{for:"sku"},"SKU:",-1)),t(s(m),{id:"sku",modelValue:o.value.sku,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.sku=a),placeholder:"SKU o código interno"},null,8,["modelValue"]),o.value.sku?C("",!0):(w(),V("small",H,"Este campo es obligatorio."))]),l("div",Q,[e[12]||(e[12]=l("label",{for:"unidad"},"Unidad:",-1)),t(s(k),{id:"unidad",modelValue:o.value.unidad,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.unidad=a),options:["pieza","servicio","kg","litro"],placeholder:"Selecciona unidad"},null,8,["modelValue"])])]),l("div",W,[l("div",Z,[e[13]||(e[13]=l("label",{for:"precioVenta"},"Precio de venta (MXN):",-1)),t(s(m),{id:"precioVenta",modelValue:o.value.precioVenta,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.precioVenta=a),placeholder:"Precio de venta"},null,8,["modelValue"])]),l("div",ee,[e[14]||(e[14]=l("label",{for:"impuesto"},"Impuesto:",-1)),t(s(k),{id:"impuesto",modelValue:o.value.impuesto,"onUpdate:modelValue":e[6]||(e[6]=a=>o.value.impuesto=a),options:["IVA 16%","IVA 0%","Exento"],placeholder:"Selecciona impuesto"},null,8,["modelValue"])]),l("div",oe,[e[15]||(e[15]=l("label",{for:"descripcion"},"Descripción:",-1)),t(s(m),{id:"descripcion",modelValue:o.value.descripcion,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.descripcion=a),placeholder:"Descripción (opcional)"},null,8,["modelValue"])])])]),l("div",le,[t(s(p),{label:"Guardar",icon:"pi pi-save",onClick:N}),t(s(p),{label:"Cancelar",icon:"pi pi-times",class:"p-button-secondary",onClick:x})])])]),_:1},8,["visible"])]))}},se=$(ae,[["__scopeId","data-v-9c7665f2"]]);export{se as default};
