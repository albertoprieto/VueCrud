import{_ as x,r as t,k,c as d,a as n,b as l,d as o,w as g,o as v,aw as y,i as b,p as r,t as u,v as m,j as V,aj as w,ax as $,ay as A}from"./index-CMb3Emy9.js";import{g as N}from"./asignacionesService-QHBQUJy4.js";const T={class:"calendario-asignaciones"},D={key:0},B={key:0},j={__name:"CalendarioAsignaciones",setup(F){const p=t([]),i=t(!1),a=t(null),_=w(),c=t({plugins:[$,A],initialView:"dayGridMonth",locale:"es",events:[],eventClick:s=>{a.value=s.event.extendedProps,i.value=!0}});k(async()=>{p.value=await N();const s=p.value.filter(e=>!!e.fecha_servicio).map(e=>({id:e.id,title:`Técnico: ${e.tecnico} - Venta: ${e.venta_id}`,start:e.fecha_servicio,extendedProps:e}));c.value={...c.value,events:s}});function C(){i.value=!1,_.push(`/asignacion/${a.value.id}`)}return(s,e)=>(v(),d("div",T,[e[6]||(e[6]=n("h2",null,"Calendario de Asignaciones a Técnicos",-1)),l(o(y),{options:c.value},null,8,["options"]),l(o(V),{visible:i.value,"onUpdate:visible":e[1]||(e[1]=f=>i.value=f),header:"Resumen de Asignación",modal:!0},{footer:g(()=>[l(o(b),{label:"Ver Detalle",icon:"pi pi-search",onClick:C}),l(o(b),{label:"Cerrar",icon:"pi pi-times",class:"p-button-secondary",onClick:e[0]||(e[0]=f=>i.value=!1)})]),default:g(()=>[a.value?(v(),d("div",D,[n("p",null,[e[2]||(e[2]=n("b",null,"Técnico:",-1)),r(" "+u(a.value.tecnico),1)]),n("p",null,[e[3]||(e[3]=n("b",null,"Fecha de servicio:",-1)),r(" "+u(a.value.fecha_servicio),1)]),n("p",null,[e[4]||(e[4]=n("b",null,"Nota de venta:",-1)),r(" "+u(a.value.venta_id),1)]),a.value.cliente_id?(v(),d("p",B,[e[5]||(e[5]=n("b",null,"Cliente:",-1)),r(" "+u(a.value.cliente_id),1)])):m("",!0)])):m("",!0)]),_:1},8,["visible"])]))}},R=x(j,[["__scopeId","data-v-8b87b3c7"]]);export{R as default};
